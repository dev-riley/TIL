# DNS, HTTP, 와이어샤크

DNS 설명 참고 : https://www.cloudflare.com/ko-kr/learning/dns/what-is-dns/

DNS

IP주소는 사람이 너무 외우기 힘드니까 기억하기 쉽게 도메인 이름을 IP주소에 매핑을 해주었는데, 도메인 이름을 검색하면 매핑된 IP주소를 찾아주는 것이 DNS이다.

<img src="C:\Users\qlrqo\AppData\Roaming\Typora\typora-user-images\image-20230409162405679.png" alt="image-20230409162405679" style="zoom:67%;" />

DNS 레코드 타입

권한 있는 DNS 서버에 있는 명령으로써, 도메인에 연계된 IP 주소 및 해당 도메인에 대한 요청의 처리 방법에 대한 정보를 제공한다. 

![image-20230409162928958](C:\Users\qlrqo\AppData\Roaming\Typora\typora-user-images\image-20230409162928958.png)

- A 레코드 : 도메인의 IP 주소를 갖고 있는 레코드
- AAAA 레코드 : 도메인의 IPv6 주소를 포함하는 레코드
- CNAME 레코드 : 하나의 도메인이나 하위 도메인을 다른 도메인으로 전달하며, IP주소를 제공하지는 않는다.
- MX 레코드 : 이메일을 이메일 서버로 전송한다.
- NS 레코드 : DNS 항복의 이름 서버를 저장한다.
- PTR 레코드 : 리버스 조회에서 도메인 이름을 제공한다.
- SOA 레코드 : 도메인에 대한 관리자 정보를 저장한다.
- SRV 레코드 : 특정 서비스에 대한 포트를 지정한다.
- TXT 레코드 : 관리자가 레코드에 텍스트 메모를 저장할 수 있다. 이 레코드는 종종 이메일 보안에 사용된다.



와이어 샤크라는 프로그램에서 프레임이 들어오고 나가는 것을 편하게 보여주는 프로그램이다. 



### 3-way handshaking

TCP는 장치들 사이에 논리적인 접속을 성립하기 위해 3-way handsahke를 사용한다. 3-way handshake는 TCP/IP 프로토콜을 이용해서 통신을 하는 응용프로그램이 데이터를 전송하기 전에 먼저 정확한 전송을 보장하기 위해 상대방 컴퓨터와 사전에 세션을 수립하는 과정을 의미한다. 서로 간의 연결이 맺어졌다는 확인이 가능하다. UDP는 이런과정이 없다.

![image-20230409165847032](C:\Users\qlrqo\AppData\Roaming\Typora\typora-user-images\image-20230409165847032.png)



### TLS 핸드셰이크

https://www.cloudflare.com/ko-kr/learning/ssl/what-happens-in-a-tls-handshake/

![image-20230410114048582](C:\Users\qlrqo\AppData\Roaming\Typora\typora-user-images\image-20230410114048582.png)

TLS 핸드셰이크는 클라이언트와 서버가 교환하는 일련의 데이터그램, 즉 메시지입니다. TLS 핸드셰이크는 여러 단계로 이루어집니다. 그 과정에서 클라이언트와 서버는 핸드셰이크를 완료하고 추가 대화를 가능하게 하는 데 필요한 정보를 교환합니다.

1. '클라이언트 헬로' 메세지 : 클라이언트가 서버로 "헬로" 메세지를 전송하면서 핸드셰이크를 개시한다. 이 메세지에는 클라이언트가 지원하는 TLS 버전, 지원되는 암호 제품군 그리고 "클리아언트 무작위"라고 하는 무작위 바이트 문자열이 포함된다.
2. '서버 헬로' 메세지 : 클라이언트 헬로 메세지에 대한 응답으로 서버가 서버의 SSL 인증서, 서버에서 선택한 암호 제품군 그리고 서버에서 생성한 또다른 무작위 바이트 문자열인 "서버 무작위"를 포함하는 메세지를 전송한다.
3. 인증 : 클라이언트가 서버의 SSL 인증서를 인증서 발행 기관을 통해 검증한다. 이를 통해 서버가 인증서에 명시된 서버인지, 그리고 클라이언트가 상호작용 중인 서버가 실제 해당 도메인의 소유자인지를 확인한다.
4. 예비 마스터 암호 : 클라이언트가 "예비 마스터 암호"라고 하는 무작위 바이트 문자열을 하나 더 전송한다. 예비 마스터 암호는 공개키로 암호화되어 있으며, 서버가 개인키로만 해독할 수 있다.(클라이언트는 서버의 SSL 인증서를 통해 공개키를 받는다.)
5. 개인키 사용 : 서버가 예비 마스터 암호를 해독한다.
6. 세션 키 생성 : 클라이언트와 서버가 모두 클라이언트 무작위, 서버 무작위, 예비 마수터 암호를 이용해 세션 키를 생성한다. 모두 같은 결과가 나와야 한다.
7. 클라이언트 준비 완료 : 클라이언트가 세션 키로 왐호화된 "완료" 메세지를 전송한다.
8. 서버 준비 완료 : 서버가 세션 키로 암호화된 "완료" 메세지를 전송한다.
9. 안전한 대칭 암호화 성공 : 핸드셰이크가 완료되고, 세션 키를 이용해 통신이 계속 진행된다.



[링크]

HTTP의 헤더의 관한 내용 

rfc-editor.org/rfc/rfc9110

[브라우저의 사용자 에이전트는 왜 이렇게 복잡하게 생겼을까?](https://wormwlrm.github.io/2021/10/11/Why-User-Agent-string-is-so-complex.html)



